# Smoke test: verify SEPA amplification wiring works end-to-end
# 1 condition x 1 seed x 10 steps = 1 run (~2 min on tinker)
#
# Check:
#   - plan_entropy_mean > 0 (semantic detector fires)
#   - exec_entropy_var increases (amplification, not compression)
#   - sepa_lambda ramps up from 0
#
# Run: retrain campaigns/sepa-amplify-smoke.toml

[campaign]
seeds = [42]
max_steps = 10

[[campaign.conditions]]
advantage_mode = "maxrl"
transform_mode = "gtpo_sepa_amp"

# --- base training config ---

[backend]
backend = "tinker"

[model]
model = "Qwen/Qwen3-4B-Instruct-2507"
lora_rank = 128

[training]
batch_size = 4
group_size = 8
max_tokens = 2048
temperature = 0.7
lr = 4e-5
save_every = 0

[planning]
detector = "regex"

[sepa]
steps = 10
schedule = "linear"
delay_steps = 2

[logging]
wandb_project = "sepa-amplify-smoke"
